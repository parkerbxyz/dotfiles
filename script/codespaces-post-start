#!/usr/bin/env bash
#
# Run by Codespaces after starting

# Install fish if not installed
if ! command -v fish >/dev/null; then
  sudo apt-add-repository ppa:fish-shell/release-3 --update --yes
  sudo apt install fish
fi

# Install font-fira-code-nerd-font (Starship dependency)
mkdir -p ~/.local/share/fonts
cd ~/.local/share/fonts && curl -fLO https://github.com/ryanoasis/nerd-fonts/raw/HEAD/patched-fonts/FiraCode/Regular/FiraCodeNerdFont-Regular.ttf

# Install Starship
curl -sS https://starship.rs/install.sh | sh -s -- -y

# Disable Starship container configuration
echo "
[container]
disabled = true" >> ~/.config/starship.toml

# Use default commit signing configuration
git config --global --unset user.signingkey
git config --global --unset gpg.format
git config --global --unset gpg.ssh.program
git config --global --unset commit.gpgsign

# Install VSCode extensions
script/install-vscode-extensions
